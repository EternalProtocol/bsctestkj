import{r as s,n as Qe,j as t,T as u,I as r,B as l,o as Ye,q as n,v as f,M as Ce}from"./vendor-B9IB914J.js";import{L as Q,P as v,S as A,N as Ze}from"./index-Be7kqAQ1.js";import{v as h}from"./validateAddress-BE2p6uyu.js";import{c}from"../assets/index-D0p5yCsU.js";import{M as Y}from"./MiningMachineSystemLogic-BW-YOQBb.js";import{M as L}from"./MiningMachineProductionLogic-CseX3utK.js";import{M as I}from"./MiningMachineSystemStorage-DvDQZY6X.js";import{M as $e}from"./MiningMachineNodeSystem-DwTBrQlD.js";const ht=()=>{const[Z,$]=s.useState(""),[ee,te]=s.useState(""),[se,ne]=s.useState(""),[ae,oe]=s.useState(""),[Me,z]=s.useState(!1),[ke,T]=s.useState(!1),[ve,D]=s.useState(!1),[Ae,P]=s.useState(!1),[Le,E]=s.useState(!1),[et,tt]=s.useState(!1),[Ie,R]=s.useState(!1),[ze,U]=s.useState(!1),[p,ie]=s.useState(""),[g,le]=s.useState(""),[V,re]=s.useState(""),[m,ce]=s.useState(""),[b,de]=s.useState(""),[y,fe]=s.useState(""),[w,ue]=s.useState(""),[j,xe]=s.useState(""),[X,he]=s.useState(""),[N,me]=s.useState(""),[Te,F]=s.useState(!1),[st,nt]=s.useState(""),[at,De]=s.useState(""),[ot,Pe]=s.useState(""),[_,pe]=s.useState(""),[W,ge]=s.useState(""),[Ee,B]=s.useState(!1),[Re,O]=s.useState(!1),[S,be]=s.useState(""),[C,ye]=s.useState(""),[Ue,G]=s.useState(!1),[q,we]=s.useState(""),[Ve,H]=s.useState(!1),[J,je]=s.useState(""),[K,Ne]=s.useState(""),[Xe,Se]=s.useState(!1),Fe=async()=>{var a,i;if(!((i=(a=h)==null?void 0:a.EVM)==null?void 0:i.call(a,_))){n.show({content:"请输入合法的的地址",position:"center",duration:2e3});return}try{B(!0);const o=await d({address:A,abi:I,functionName:"setSadmin",args:[_]});await f(c,{hash:o}),n.show({content:"修改成功!",position:"center"}),B(!1),pe("")}catch(o){n.show({content:"修改失败",position:"center"}),B(!1),console.error(o)}},_e=async()=>{var a,i;if(!((i=(a=h)==null?void 0:a.EVM)==null?void 0:i.call(a,W))){n.show({content:"请输入合法的的地址",position:"center",duration:2e3});return}try{O(!0);const o=await d({address:A,abi:I,functionName:"setPlatformWallet",args:[W]});await f(c,{hash:o}),n.show({content:"修改成功!",position:"center"}),O(!1),ge("")}catch(o){n.show({content:"修改失败",position:"center"}),O(!1),console.error(o)}},We=async()=>{try{const a=await Ye(c,{contracts:[{address:Q,abi:Y,functionName:"PLATFORM_FEE_USD",args:[]},{address:Q,abi:Y,functionName:"SELLER_INCOME_USD",args:[]}]});De(String(a[0].result)),Pe(String(a[1].result))}catch(e){console.error(e)}};s.useEffect(()=>{We()},[]);const Be=async()=>{if(g===""||p===""||+p==0||+g==0||V===""||m===""||+V==0||+m==0){n.show({content:"母矿机生命周期、生产间隔，子矿机生命周期、生产间隔不能为0",position:"center"});return}try{E(!0);const e=await d({address:v,abi:L,functionName:"setMachineParams",args:[+g*60*24,+p*60*24,+m*60*24,Ce(m)]});await f(c,{hash:e}),n.show({content:"修改成功!",position:"center"}),E(!1),ie(""),le(""),re(""),ce("")}catch(e){n.show({content:"修改失败",position:"center"}),E(!1),console.error(e)}},{writeContractAsync:d}=Qe(),M=async(e,a)=>{const i={idx:"setIdxToken",usdt:"setUsdtToken",pancake:"setPancakeRouter",pair:"setIdxUsdtPair"};try{e==="idx"?z(!0):e==="usdt"?T(!0):e==="pancake"?D(!0):e==="pair"&&P(!0);const o=await d({address:A,abi:I,functionName:i[e],args:[a]});await f(c,{hash:o}),n.show({content:"修改成功!",position:"center"}),e==="idx"?(z(!1),$("")):e==="usdt"?(T(!1),te("")):e==="pancake"?(D(!1),ne("")):e==="pair"&&(P(!1),oe(""))}catch(o){n.show({content:"修改失败",position:"center"}),e==="idx"?z(!0):e==="usdt"?T(!0):e==="pancake"?D(!0):e==="pair"&&P(!0),console.error(o)}},k=(e,a)=>{var o,x;if(!((x=(o=h)==null?void 0:o.EVM)==null?void 0:x.call(o,e))){n.show({content:t.jsxs("div",{className:"text-[13px]",children:["请输入合法的",a,"代币合约地址"]}),position:"center",duration:2e3});return}switch(a){case"IDX":M("idx",e);break;case"USDT":M("usdt",e);break;case"PancakeRouter":M("pancake",e);break;case"IDX与USDT交易对":M("pair",e);break}},Oe=async()=>{if(+y==0||y===""){n.show({content:"提现锁定周期不能为0",position:"center"});return}if(+w==0||w===""){n.show({content:"释放总周期不能为0",position:"center"});return}if(+j==0||j===""){n.show({content:"释放间隔不能为0",position:"center"});return}try{R(!0);const e=await d({address:v,abi:L,functionName:"setLockReleaseParams",args:[+y*24*60*60,+w*24*60*60,+j*1440]});await f(c,{hash:e}),n.show({content:"修改成功!",position:"center"}),R(!1),fe(""),ue(""),xe("")}catch(e){n.show({content:"修改失败",position:"center"}),R(!1),console.error(e)}},Ge=async()=>{if(+b==0||b===""){n.show({content:"合成矿机的个数不能为0",position:"center",duration:2e3});return}try{U(!0);const e=await d({address:Ze,abi:$e,functionName:"setNodesAmount",args:[b]});await f(c,{hash:e}),n.show({content:"修改成功!",position:"center"}),U(!1),de("")}catch(e){n.show({content:"修改失败",position:"center"}),U(!1),console.error(e)}},qe=async()=>{var a,i;if(!((i=(a=h)==null?void 0:a.EVM)==null?void 0:i.call(a,X))){n.show({content:"请输入合法的代币合约地址",position:"center",duration:2e3});return}if(+N==0||N===""){n.show({content:"提取数量不能为0",position:"center",duration:2e3});return}try{F(!0);const o=await d({address:Q,abi:Y,functionName:"withdrawToken",args:[X,Ce(N)]});await f(c,{hash:o}),n.show({content:"提取成功!",position:"center"}),F(!1),he(""),me("")}catch(o){n.show({content:"提取失败",position:"center"}),F(!1),console.error(o)}},He=async()=>{if(+S==0||S===""){n.show({content:"MIX数量不能为0",position:"center",duration:2e3});return}if(+C==0||C===""){n.show({content:"IDX数量不能为0",position:"center",duration:2e3});return}try{G(!0);const e=await d({address:v,abi:L,functionName:"setSwap",args:[C,S]});await f(c,{hash:e}),n.show({content:"修改成功!",position:"center"}),G(!1),ye(""),be("")}catch(e){n.show({content:"修改失败",position:"center"}),G(!1),console.error(e)}},Je=async()=>{var a,i;if(!((i=(a=h)==null?void 0:a.EVM)==null?void 0:i.call(a,q))){n.show({content:"请输入合法的接收地址",position:"center",duration:2e3});return}try{H(!0);const o=await d({address:A,abi:I,functionName:"setCommissionWallet",args:[q]});await f(c,{hash:o}),n.show({content:"修改成功!",position:"center"}),H(!1),we("")}catch(o){n.show({content:"修改失败",position:"center"}),H(!1),console.error(o)}},Ke=async()=>{var i,o;if(!((o=(i=h)==null?void 0:i.EVM)==null?void 0:o.call(i,J))){n.show({content:"请输入合法的接收地址",position:"center",duration:2e3});return}const a=+K;if(a<=1||a>100||isNaN(a)||K===""){n.show({content:"铸造数量必须在1-100之间",position:"center",duration:2e3});return}try{Se(!0);const x=await d({address:v,abi:L,functionName:"sadminMintChildMachines",args:[J,a]});await f(c,{hash:x}),n.show({content:"子矿机铸造成功!",position:"center"}),je(""),Ne("")}catch(x){n.show({content:"子矿机铸造失败",position:"center"}),console.error("Minting child machine failed:",x)}finally{Se(!1)}};return t.jsxs("div",{className:"h-full overflow-scroll px-[1.3125rem] mt-2 pb-4",children:[t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"手动铸造子矿机"}),t.jsx(u,{placeholder:"输入接收地址",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 pt-2 !flex !items-center !justify-center mb-2",value:J,onChange:e=>je(e)}),t.jsx(r,{placeholder:"输入铸造数量(0-100)",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-2 !flex !items-center !justify-center mb-2",value:K,type:"number",onChange:e=>Ne(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Xe,onClick:Ke,children:"铸造子矿机"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"铸造矿机的权限"}),t.jsx(u,{placeholder:"输入目标地址",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 pt-2 !flex !items-center !justify-center",value:W,onChange:e=>ge(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Re,onClick:_e,children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"更改管理员"}),t.jsx(u,{placeholder:"输入目标地址",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 pt-2 !flex !items-center !justify-center",value:_,onChange:e=>pe(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Ee,onClick:Fe,children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"手续费接收地址"}),t.jsx(u,{placeholder:"输入目标地址",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 pt-2 !flex !items-center !justify-center",value:q,onChange:e=>we(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Ve,onClick:Je,children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"提取代币"}),t.jsx(u,{placeholder:"输入代币地址",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 pt-2 !flex !items-center !justify-center",value:X,onChange:e=>he(e)}),t.jsx(r,{placeholder:"输入提取数量",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-2 !flex !items-center !justify-center mb-2",value:N,type:"number",onChange:e=>me(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Te,onClick:qe,children:"提取"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"IDX合约地址设置"}),t.jsx(u,{placeholder:"输入IDX代币合约地址",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 pt-2 !flex !items-center !justify-center",value:Z,onChange:e=>$(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Me,onClick:()=>k(Z,"IDX"),children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"USDT合约地址设置"}),t.jsx(u,{placeholder:"输入USDT代币合约地址",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 pt-2 !flex !items-center !justify-center",value:ee,onChange:e=>te(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:ke,onClick:()=>k(ee,"USDT"),children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"PancakeRouter合约地址设置"}),t.jsx(u,{placeholder:"输入PancakeRouter代币合约地址",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 pt-2 !flex !items-center !justify-center",value:se,onChange:e=>ne(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:ve,onClick:()=>k(se,"PancakeRouter"),children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"IDX与USDT交易对地址设置"}),t.jsx(u,{placeholder:"输入IDX与USDT交易对地址",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 pt-2 !flex !items-center !justify-center",value:ae,onChange:e=>oe(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Ae,onClick:()=>k(ae,"IDX与USDT交易对"),children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col justify-between",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"矿机设置"}),t.jsx("span",{className:"text-[12px]",children:"规则："}),t.jsx("div",{className:"text-[12px]",children:t.jsx("div",{children:"母矿机产矿数量 = 总生命周期（天）/ 生产间隔（天）"})}),t.jsx(r,{placeholder:"总生命周期（天）",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-1 !flex !items-center !justify-center mb-2",value:p,type:"number",onChange:e=>ie(e)}),t.jsx(r,{placeholder:"生产间隔（天）",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-1 !flex !items-center !justify-center",value:g,type:"number",onChange:e=>le(e)}),t.jsx("span",{className:"text-[12px]",children:"规则："}),t.jsx("div",{className:"text-[12px]",children:"子矿机产MIX量 = 总生命周期（天）/ 生产MiX数（天）"}),t.jsx(r,{placeholder:"总生命周期（天）",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-1 !flex !items-center !justify-center mb-2",value:V,type:"number",onChange:e=>re(e)}),t.jsx(r,{placeholder:"生产MiX个数（天）",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-1 !flex !items-center !justify-center",value:m,type:"number",onChange:e=>ce(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Le,onClick:()=>Be(),children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"提现设置"}),t.jsx(r,{placeholder:"提现锁定周期",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-2 !flex !items-center !justify-center mb-2",value:y,type:"number",onChange:e=>fe(e)}),t.jsx(r,{placeholder:"释放总周期",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-2 !flex !items-center !justify-center mb-2",value:w,type:"number",onChange:e=>ue(e)}),t.jsx(r,{placeholder:"释放间隔",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-2 !flex !items-center !justify-center mb-2",value:j,type:"number",onChange:e=>xe(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Ie,onClick:Oe,children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"节点设置"}),t.jsx(r,{placeholder:"合成小节点的矿机个数",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-2 !flex !items-center !justify-center mb-2",value:b,type:"number",onChange:e=>de(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:ze,onClick:Ge,children:"修改"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-2xl mt-2 flex flex-col gap-1",children:[t.jsx("h2",{className:"mb-2 font-bold",children:"MIX兑换IDX设置"}),t.jsx(r,{placeholder:"MIX数量",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-2 !flex !items-center !justify-center mb-2",value:S,type:"number",onChange:e=>be(e)}),t.jsx(r,{placeholder:"IDX数量",style:{"--font-size":"13px"},className:"!bg-[#f3f3f3] rounded-3xl px-4 py-2 !flex !items-center !justify-center mb-2",value:C,type:"number",onChange:e=>ye(e)}),t.jsx(l,{className:"!bg-black !text-white !rounded-3xl !ml-auto !mt-2  !py-1 !w-full",style:{fontSize:"13px"},loading:Ue,onClick:He,children:"修改"})]})]})};export{ht as default};
