import{j as e,x as Oe,y as ye,J as wt,r as s,u as Xe,i as We,n as nt,l as ee,o as se,N as De,E as Fe,p as ge,M as Be,D as Ze,B as fe,F as Ue,S as Qe,q as j,s as Te,v as Ne,U as jt,I as Nt,X as ae,K as st,L as at}from"./vendor-B9IB914J.js";import{a as yt}from"./arrow-Dt4f_FJz.js";import{s as Ce}from"./selected-kuvggaMB.js";import{p as Ct}from"./purple-mining-machine-qJc6x0wW.js";import{t as ct,u as lt,w as kt}from"./usePopup-KJQz5Xrc.js";import{s as ot}from"./started-CK8rpOhi.js";import{S as Q,P as Ae,L as te,I as $e,A as rt,C as Ie,N as ue}from"./index-Be7kqAQ1.js";import{A as oe,N as re}from"./index-YG593oy5.js";import{c as f}from"../assets/index-D0p5yCsU.js";import{u as dt}from"./useSequentialContractWrite-swUE3PVz.js";import{u as xt}from"./usePaymentCheck-Bfv_8_3P.js";import{E as qe}from"./EmptyComp-DbFDXUVs.js";import{M as q}from"./MiningMachineSystemStorage-DvDQZY6X.js";import{M as Pe}from"./MiningMachineProductionLogic-CseX3utK.js";import{M as Ee}from"./MiningMachineSystemLogic-BW-YOQBb.js";import{t as Lt}from"./transfer-CmFgXUEi.js";import{u as St}from"./user-machine-DxW_ZeqC.js";import{g as Mt}from"./helper-Cniy7oTW.js";import{M as me}from"./MiningMachineNodeSystem-DwTBrQlD.js";const ht="data:image/svg+xml,%3csvg%20viewBox='0%200%2013%2017.9375'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='13'%20height='17.9375'%20fill='none'%20customFrame='%23000000'%3e%3cg%20id='组合%203211'%3e%3cpath%20id='矢量%20101'%20d='M6.5001%205.09058C5.38299%205.09058%204.47412%205.96052%204.47412%207.02977C4.47412%208.09903%205.38299%208.96894%206.5001%208.96894C7.6172%208.96894%208.52608%208.099%208.52608%207.02975C8.52608%205.96049%207.6172%205.09058%206.5001%205.09058L6.5001%205.09058ZM6.5001%207.51455C6.22076%207.51455%205.9936%207.29699%205.9936%207.02975C5.9936%206.7625%206.22076%206.54495%206.5001%206.54495C6.77943%206.54495%207.00659%206.7625%207.00659%207.02975C7.00659%207.29702%206.77943%207.51455%206.5001%207.51455Z'%20fill='rgb(58,58,63)'%20fill-rule='nonzero'%20/%3e%3cpath%20id='矢量%20102'%20d='M12%2010.7196L12%208.53166C12%206.53235%2011.401%205.07393%2010.2678%203.39726C9.51378%202.2816%208.5473%201.32727%207.42859%200.568003C7.12923%200.3649%206.82071%200.173763%206.49993%200C6.17929%200.173763%205.87077%200.3649%205.57141%200.568003C4.4527%201.32727%203.48621%202.2816%202.73216%203.39726C1.59899%205.07393%201%206.53235%201%208.53166L1%2010.7196L0%2012.6465L0%2014.8776L13%2014.8776L13%2012.6465L12%2010.7196ZM11.4805%2013.4232L1.51946%2013.4232L1.51946%2013.2487L2.51946%2011.3219L2.51946%208.53166C2.51946%206.81332%203.03423%205.62809%204.00789%204.1872C4.66784%203.21086%205.51586%202.37774%206.49991%201.72049C7.48395%202.37774%208.33211%203.21086%208.99206%204.1872C9.96572%205.62809%2010.4805%206.81335%2010.4805%208.53166L10.4805%2011.3218L11.4805%2013.2487L11.4805%2013.4232L11.4805%2013.4232ZM6.50004%2016.3274C5.89968%2016.0338%205.51476%2015.6786%205.05662%2015.2711L2.89635%2015.2711C3.84849%2016.3311%204.82673%2017.1949%206.18052%2017.7957L6.50004%2017.9375L6.81956%2017.7957C8.17322%2017.195%209.15132%2016.3312%2010.1035%2015.2711L7.94346%2015.2711C7.48535%2015.6786%207.1004%2016.0338%206.50004%2016.3274Z'%20fill='rgb(58,58,63)'%20fill-rule='nonzero'%20/%3e%3c/g%3e%3c/svg%3e",At="data:image/svg+xml,%3csvg%20viewBox='0%200%2021.5217%2021.5217'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='21.5217285'%20height='21.5217285'%20fill='none'%20customFrame='%23000000'%3e%3cg%20id='组合%203218'%3e%3cpath%20id='矢量%20103'%20d='M14.6177%206.42963C15.157%206.98797%2015.157%207.88976%2014.6177%208.4481L8.21638%2014.9944C7.95548%2015.2632%207.6014%2015.4142%207.23218%2015.4142C6.86296%2015.4142%206.50893%2015.2632%206.24798%2014.9944L0%208.5719L0.707107%200.707107L8.36969%200L11.4937%203.21482'%20stroke='rgb(58,58,63)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%20transform='matrix(0.707107,0.707107,-0.707107,0.707107,10.8994,0)'%20/%3e%3cpath%20id='矢量%20104'%20d='M0.966038%201.98825C1.49956%201.98825%201.93208%201.54316%201.93208%200.994123C1.93208%200.445089%201.49956%200%200.966038%200C0.432515%200%200%200.445089%200%200.994123C0%201.54316%200.432515%201.98825%200.966038%201.98825Z'%20fill='rgb(58,58,63)'%20fill-rule='evenodd'%20transform='matrix(0.707107,0.707107,-0.707107,0.707107,10.8359,5.4353)'%20/%3e%3c/g%3e%3c/svg%3e",It="/assets/bottom-pattern-DyYAFLDO.svg",Pt="data:image/svg+xml,%3csvg%20viewBox='0%200%2018%2018'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='18'%20height='18'%20fill='none'%20customFrame='%23000000'%3e%3cg%20id='组合%203398'%3e%3cpath%20id='多边形%204'%20d='M15.2354%2012.8L15.9282%2014L14.5426%2014L3.45744%2014L2.0718%2014L2.76462%2012.8L8.30718%203.2L9%202L9.69282%203.2L15.2354%2012.8ZM13.8497%2012.8L4.15026%2012.8L9%204.4L13.8497%2012.8Z'%20fill='rgb(0,0,0)'%20fill-rule='evenodd'%20/%3e%3ccircle%20id='椭圆%2040'%20cx='9'%20cy='2'%20r='2'%20fill='rgb(0,0,0)'%20/%3e%3ccircle%20id='椭圆%2041'%20cx='2'%20cy='14'%20r='2'%20fill='rgb(0,0,0)'%20/%3e%3ccircle%20id='椭圆%2042'%20cx='16'%20cy='14'%20r='2'%20fill='rgb(0,0,0)'%20/%3e%3c/g%3e%3c/svg%3e",Et="data:image/svg+xml,%3csvg%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='16'%20height='16'%20fill='none'%20customFrame='%23000000'%3e%3cg%20id='组合%203440'%3e%3ccircle%20id='椭圆%2046'%20cx='8'%20cy='8'%20r='8'%20fill='rgb(111,75,190)'%20/%3e%3cpath%20id='矢量%20171'%20d='M8.25042%2010.6465L8.25042%206.52173L7.89328%206.52173L7.53613%206.52173'%20fill-rule='nonzero'%20stroke='rgb(255,255,255)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%20/%3e%3cpath%20id='矢量%20170'%20d='M8%203C8.55228%203%209%203.44772%209%204C9%204.55228%208.55228%205%208%205C7.44772%205%207%204.55228%207%204C7%203.44772%207.44772%203%208%203Z'%20fill='rgb(127.5,127.5,127.5)'%20fill-rule='evenodd'%20/%3e%3cpath%20id='矢量%20170'%20d='M9%204C9%203.44772%208.55228%203%208%203C7.44772%203%207%203.44772%207%204C7%204.55228%207.44772%205%208%205C8.55228%205%209%204.55228%209%204Z'%20fill='rgb(255,255,255)'%20fill-rule='evenodd'%20/%3e%3cpath%20id='矢量%20172'%20d='M7.5%2011L8.93018%2011'%20stroke='rgb(255,255,255)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%20/%3e%3c/g%3e%3c/svg%3e",Dt={"adm-tabs":"_adm-tabs_5d5xy_1","adm-tabs-tab-active":"_adm-tabs-tab-active_5d5xy_11"},it=(a,p,c)=>{if(a){const h=new Date().getTime(),u=Math.abs(h-c*1e3);return 90-Math.floor(u/(1e3*60*60*24))}return 90},Ft=a=>{var b;const p=a+"",c=wt.SHA256(p).toString(),h=((b=c.match(/[a-zA-Z]/g))==null?void 0:b.slice(0,4).join(""))||"ABCD",u=c.slice(10,14);return(h+u).toUpperCase()},Bt=({item:a,onLeftClick:p,onRightClick:c})=>{const h=()=>a.isActivatedStakedLP;return e.jsxs("div",{className:Oe("bg-white p-2 flex justify-between mt-2 text-[.68rem] rounded-[24px]"),children:[e.jsxs("div",{className:"flex relative",onClick:()=>p(a),children:[!h()&&e.jsx(ye,{checked:a.checked,icon:u=>u?e.jsx("img",{src:Ce,alt:"",width:16,height:16}):e.jsx("div",{className:"border border-[#a5a4a4] w-[1rem] h-[1rem] rounded-[50%]"})}),e.jsx("img",{src:Ct,alt:"",className:"mx-2 w-[3.625rem]"})]}),e.jsxs("div",{className:"basis-5/7 h-[58px] flex flex-col mt-1 gap-1",onClick:()=>c(a),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex rounded-3xl pr-3",style:{background:"linear-gradient(90deg, rgba(148, 61, 249, 0) 0%, rgba(148, 61, 249, 1) 100%)"},children:["#",Ft(a.id),e.jsx("div",{className:"text-white ml-3",children:"母矿机"})]}),e.jsx("div",{className:"text-[#15b268] flex gap-1",children:e.jsx("img",{src:h()?ot:ct,alt:"",width:50})})]}),h()?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-1",children:["累计产出矿机：",e.jsxs("div",{className:"font-bold flex gap-1",children:[e.jsx("div",{children:a.producedChildCount}),"个"]})]}),e.jsxs("div",{className:"flex gap-1",children:["矿机生命剩余：",e.jsx("div",{children:it(a.isActivatedStakedLP,a.lastProduceTime,a.activatedAt)}),"天"]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex mt-2",children:["生命剩余：",e.jsx("div",{children:it(a.isActivatedStakedLP,a.lastProduceTime,a.activatedAt)}),"天"]})})]})]},a.id)},Tt=()=>{const[a,p]=s.useState([]),{address:c}=Xe(),h=We(),{writeContractAsync:u}=nt(),[b,v]=s.useState(!1),[N,E]=s.useState(0),ie=s.useRef(null),[de,xe]=s.useState(!1),[y,r]=s.useState([]),[S,_]=s.useState(""),[ne,K]=s.useState(""),k=s.useMemo(()=>a.filter(l=>!l.isActivatedStakedLP).length||0,[a]);s.useEffect(()=>{k===y.length&&k>0?v(!0):v(!1)},[k,y]);const{batchActivateMachinesWithLP:R}=dt(),J=s.useCallback(async()=>{xe(!0);try{const L=(await ee(f,{address:Q,abi:q,functionName:"getOwnerToMachineIds",args:[c]})).map(o=>Number(o)),C=L.map(o=>({address:Q,abi:q,functionName:"getMachineLifecycle",args:[o]})),le=(await se(f,{contracts:C})).map((o,Z)=>({activatedAt:Number(o.result.activatedAt),createTime:Number(o.result.createTime),expiredAt:Number(o.result.expiredAt),destroyed:o.result.destroyed,isActivatedStakedLP:o.result.isActivatedStakedLP,isFuelPaid:o.result.isFuelPaid,isProducing:o.result.isProducing,checked:!1,id:L[Z],lastProduceTime:Number(o.result.lastProduceTime),producedChildCount:Number(o.result.producedChildCount),producedHours:Number(o.result.producedHours),mtype:o.result.mtype,fuelRemainingMinutes:Number(o.result.fuelRemainingMinutes)})).filter(o=>o.mtype===1),ke=le.map(o=>({address:Q,abi:q,functionName:"_isOnSale",args:[o.id]})),Le=await se(f,{contracts:ke}),ve=le.map((o,Z)=>({...o,isOnSale:Le[Z].result})),Ke=ve.map(o=>({address:Ae,abi:Pe,functionName:"viewMachineProduction",args:[o.id]})),Re=await se(f,{contracts:Ke}),Se=ve.map((o,Z)=>({...o,unclaimedChildCount:Number(Re[Z].result[2])}));p(Se.sort((o,Z)=>o.activatedAt-Z.activatedAt).filter(o=>!o.destroyed)),console.log("mother machine list",Se)}catch(l){console.log(l)}finally{xe(!1)}},[c]);s.useEffect(()=>{J()},[J]),s.useEffect(()=>{b&&r(a.filter(l=>!l.isActivatedStakedLP&&!l.isOnSale))},[b,a]);const z=()=>{p(l=>{const L=l.map(C=>C.isActivatedStakedLP?C:{...C,checked:!b});return r(b?[]:L.filter(C=>!C.isActivatedStakedLP)),L}),v(!b)},H=l=>l?e.jsx("img",{src:Ce,alt:"",width:16,height:16}):e.jsx("div",{className:"border border-[#a5a4a4] w-[1rem] h-[1rem] rounded-[50%]"});s.useEffect(()=>{if(!ie.current)return;const l=()=>{const G=window.innerHeight-230;E(G)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const M=s.useCallback(l=>{p(L=>{const C=L.map(F=>F.isActivatedStakedLP?F:F.id===l.id?{...F,checked:!F.checked}:F);if(!C.find(F=>F.id===l.id).isActivatedStakedLP)if(!l.checked)r(b?a:[...y,l]);else{const le=y.filter(ke=>ke.id!==l.id);r(le),v(!1)}return C})},[b,a,y]),O=l=>{h("/user/machineDetail",{state:l})},pe=s.memo(({index:l,style:L,data:C})=>{const G=C[l];return e.jsx("div",{style:{...L,height:"70px"},children:e.jsx(Bt,{item:G,onLeftClick:M,onRightClick:O})})}),{data:ce,isLoading:I,error:B}=De({address:te,abi:Ee,functionName:"getIDXAmount",args:[30]}),{data:V,isLoading:he,error:be}=De({address:$e,abi:Fe,functionName:"balanceOf",args:[c]});s.useEffect(()=>{he||K(ge(V))},[he,V]),s.useEffect(()=>{I||_(ge(ce))},[I,ce]);const[n,A]=s.useState(!1),D=async()=>{if(y.length===0){j.show({content:"请选择要激活的矿机",position:"center",duration:2e3});return}W(!0)},{isLoading:X,isAllowanceSufficient:w}=xt(Be(String(Math.ceil(+S*y.length)))),Y=async()=>{try{if(X)return;A(!0),w||await u({address:$e,abi:Fe,functionName:"approve",args:[te,Be(rt)]});const l=y.map(C=>BigInt(C.id)),L=await R(te,l);L.success?(j.show({content:"激活成功!",position:"center"}),J(),r([]),v(!1)):j.show({content:`激活失败: ${L.error instanceof Error?L.error.message:"未知错误"}`,position:"center"})}catch(l){console.error("激活过程异常:",l),j.show({content:"激活失败，请重试",position:"center"})}finally{W(!1),A(!1)}},{setOpen:W,component:T}=lt({title:"",contentClassName:"",closeButtonClassName:"",content:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-[#6433EC] font-bold text-[15px] pt-2 pb-4",children:"激活矿机需支付打底池费用!"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"font-bold text-[14px]",children:"待支付IDX"}),e.jsx("div",{className:"text-[#FF5050] font-bold text-[16px]",children:e.jsx(oe,{type:re.BALANCE,value:+S*y.length,decimalSubLen:2,className:"ml-2 mr-1.5"})})]}),e.jsxs("div",{className:"flex justify-end text-[12px]",children:[e.jsx("div",{className:"text-[#686D6D]",children:"钱包余额："}),e.jsx("div",{className:"font-bold",children:e.jsx(oe,{type:re.BALANCE,value:ne,decimalSubLen:2,className:"ml-2 mr-1.5"})})]})]}),e.jsx(Ze,{}),e.jsx(fe,{onClick:Y,className:"!bg-black !rounded-3xl !text-white flex justify-center !py-2 w-full !text-[16px]",loading:n,disabled:+ne<+S*y.length,children:+ne>+S*y.length?"支付费用":"余额不足"})]})});return e.jsxs("div",{className:"pt-4 flex flex-col justify-between h-full",children:[T,e.jsxs("div",{className:"px-[21px]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(ye,{className:"mr-6 h-[32px] ",checked:b,icon:l=>H(l),onClick:z,style:{"--font-size":"14px","--gap":"6px"},children:"全选"}),e.jsxs("div",{className:"flex text-[#505050] text-[14px]",children:["待激活矿机，共计:",e.jsx("div",{className:"text-black font-bold mx-1",children:k}),"台"]})]}),e.jsx("div",{ref:ie,style:{height:`${N}px`},className:"no-scrollbar",children:de?e.jsx(Qe.Paragraph,{lineCount:6,animated:!0,className:"customSkeleton"}):a.length>0?e.jsx(Ue,{height:N,width:"100%",itemCount:a.length,itemSize:85,itemData:a,children:pe}):e.jsx(qe,{})})]}),e.jsx("div",{className:"w-full bg-white h-[4rem] flex justify-around items-center px-[30px] text-[12px]",onClick:D,children:e.jsxs("div",{className:" flex flex-col justify-center items-center",children:[e.jsx("img",{src:ht,alt:"",width:15}),e.jsx("div",{children:"激活"})]})})]})},$t=({item:a,onLeftClick:p,onRightClick:c})=>{const h=()=>a.isOnSale||a.isActivatedStakedLP,u=v=>Math.floor(360*(1440-b())/1440),b=()=>a.producedMix!==void 0&&a.producedMix>0?+ge(BigInt(a.producedMix)):0;return e.jsxs("div",{className:"bg-white rounded-2xl p-2  flex justify-between mt-2 text-[.68rem]",children:[e.jsxs("div",{className:"flex relative",onClick:()=>p(a),children:[!h()&&e.jsx(ye,{checked:a.checked,icon:v=>v?e.jsx("img",{src:Ce,alt:"",width:16,height:16}):e.jsx("div",{className:"border border-[#a5a4a4] w-[1rem] h-[1rem] rounded-[50%]"})}),e.jsx("img",{src:St,alt:"",width:58,className:"mx-2"})]}),e.jsxs("div",{className:"basis-5/7 h-[58px] flex flex-col gap-1.5 justify-center",onClick:()=>c(a),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex rounded-3xl pr-3",style:{background:"linear-gradient(90deg, rgba(165, 115, 71, 0) 0%, rgba(187, 112, 84, 1) 100%)"},children:["#",Mt(a.id),e.jsx("div",{className:"text-white ml-3",children:"矿机"})]}),e.jsx("div",{className:"text-[#15b268] flex gap-1",children:e.jsx("img",{src:h()?ot:ct,alt:"",width:50})})]}),e.jsxs("div",{className:"flex gap-1",children:["累计产出通证：",e.jsxs("div",{className:"font-bold text-[12px] flex gap-1",children:[e.jsx(oe,{type:re.BALANCE,value:b(),decimalSubLen:2,className:"font-bold"}),e.jsx("span",{children:"MIX"})]})]}),e.jsxs("div",{className:"flex gap-1",children:["矿机生命剩余：",e.jsxs("div",{className:"font-bold text-[12px]",children:[u(a.producedMix),"天"]})]})]})]},a.id)},Rt=({isShow:a})=>{const{address:p}=Xe(),[c,h]=s.useState([]),[u,b]=s.useState([]),[v,N]=s.useState(""),[E,ie]=s.useState(0),de=s.useRef(null),[xe,y]=s.useState(!1),[r,S]=s.useState([]),[_,ne]=s.useState(""),[K,k]=s.useState(""),{writeContractAsync:R}=nt(),{executeSequentialCalls:J}=dt(),[z,H]=s.useState(0),[M,O]=s.useState([]),[pe,ce]=s.useState(!1),[I,B]=s.useState([]),V=We(),[he,be]=s.useState(!1),[n,A]=s.useState(0),D=s.useMemo(()=>c.filter(t=>!t.isActivatedStakedLP).length||0,[c]),X=s.useCallback(t=>{B(i=>i.includes(t)?i.filter(m=>m!==t):[...i,t])},[]),w=s.useCallback(async()=>{try{y(!0),console.log("开始查询矿机列表数据...");const t=await ee(f,{address:Q,abi:q,functionName:"getOwnerToMachineIds",args:[p]});console.log("获取用户所有矿机ID原始数据:",t);const i=t.map(x=>Number(x));if(console.log("转换后所有矿机ID列表:",i),i.length===0){console.log("当前用户没有任何矿机"),h([]),b([]),O([]),H(0),B([]);return}const m=i.map(x=>({address:Q,abi:q,functionName:"getMachineLifecycle",args:[x]}));console.log(`批量查询${m.length}台矿机的生命周期信息`);const g=await se(f,{contracts:m});console.log("矿机生命周期数据查询完成:",g);const d=g.map((x,U)=>{const je=i[U],P=x.result;return{id:je,activatedAt:Number(P.activatedAt),createTime:Number(P.createTime),expiredAt:Number(P.expiredAt),destroyed:P.destroyed,isActivatedStakedLP:P.isActivatedStakedLP,isFuelPaid:P.isFuelPaid,isProducing:P.isProducing,lastProduceTime:Number(P.lastProduceTime),producedChildCount:Number(P.producedChildCount),producedHours:Number(P.producedHours),mtype:P.mtype,fuelRemainingMinutes:Number(P.fuelRemainingMinutes),checked:!1}});console.log("所有矿机基础信息处理完成:",d),b(d);const $=d.filter(x=>x.mtype===1&&x.isActivatedStakedLP),Me=$.map(x=>x.id);console.log(`母矿机筛选结果: 有效=${$.length}台`),console.log("有效母矿机ID列表:",Me),O(Me),B([]);let we=0;if($.length>0){const x=$.map(je=>({address:Ae,abi:Pe,functionName:"viewMachineProduction",args:[je.id]}));console.log(`查询${x.length}台母矿机的待领取子矿机数量`),we=(await se(f,{contracts:x})).reduce((je,P,bt)=>{const tt=Number(P.result[2]),vt=$[bt].id;return console.log(`母矿机ID=${vt} 待领取子矿机数量: ${tt}`),je+tt},0)}console.log(`当前可领取子矿机总数: ${we}`),H(we);const He=d.filter(x=>x.mtype===2);console.log("子矿机原始列表:",He);const Ye=He.map(x=>({address:Ae,abi:Pe,functionName:"viewMachineProduction",args:[x.id]}));console.log(`查询${Ye.length}台子矿机的MIX产出`);const Ge=await se(f,{contracts:Ye}),_e=He.map((x,U)=>({...x,producedMix:Ge[U].status==="success"?Number(Ge[U].result[3]):0}));console.log("带产出数据的子矿机列表:",_e);const et=_e.map(x=>({address:Q,abi:q,functionName:"_isOnSale",args:[x.id]}));console.log(`查询${et.length}台子矿机的在售状态`);const pt=await se(f,{contracts:et}),ze=_e.map((x,U)=>({...x,isOnSale:pt[U].result})).filter(x=>!x.isOnSale&&!x.isActivatedStakedLP).sort((x,U)=>x.activatedAt-U.activatedAt);console.log(`最终显示的子矿机列表（共${ze.length}台）:`,ze),h(ze)}catch(t){console.error("查询矿机列表失败:",t),h([]),b([]),O([]),H(0),B([])}finally{y(!1)}},[p]);s.useEffect(()=>{if(u.length===0)return;const t=u.filter(i=>i.mtype===1&&i.isActivatedStakedLP).map(i=>i.id);t.join(",")!==M.join(",")&&(console.log("基于所有矿机同步母矿机ID列表:",t),O(t),B([]))},[u,M]);const Y=s.useCallback(async()=>{try{if(ce(!0),console.log("开始批量领取子矿机，选中的母矿机ID列表:",I),I.length===0){console.log("没有选择任何母矿机"),j.show({content:"请先选择要领取的母矿机",position:"center"});return}const t={validIds:[],invalidIds:[]};if(I.forEach(g=>{const d=u.find($=>$.id===g);if(!d){t.invalidIds.push(`ID=${g}（不在所有矿机列表中）`);return}d.mtype!==1?t.invalidIds.push(`ID=${g}（非母矿机，mtype=${d.mtype}）`):d.isActivatedStakedLP?t.validIds.push(g):t.invalidIds.push(`ID=${g}（母矿机未激活）`)}),t.invalidIds.length>0){console.error(`发现${t.invalidIds.length}个无效矿机: ${t.invalidIds.join("; ")}`),j.show({content:`存在无效矿机，请刷新后重试（共${t.invalidIds.length}个）`,position:"center"}),w();return}console.log("校验通过的母矿机ID:",t.validIds);const i=await Te(f,{address:Ae,abi:Pe,functionName:"claimChildrenByMachineIds",args:[t.validIds]});console.log("批量领取子矿机交易已发送，哈希:",i);const m=await Ne(f,{hash:i,chainId:Ie});console.log("批量领取子矿机交易已确认，区块号:",m.blockNumber),H(0),B([]),w(),j.show({content:"子矿机领取成功",position:"center"})}catch(t){console.error("领取子矿机失败:",t);let i="领取失败: 未知错误";t instanceof Error&&(t.message.includes("No machines specified")?i="领取失败: 未指定母矿机":t.message.includes("Machine not owned")?i="领取失败: 不是矿机所有者":t.message.includes("Not a mother machine")?(i="领取失败: 包含非母矿机ID，请刷新列表",w()):t.message.includes("Mother not active")?i="领取失败: 母矿机未激活":t.message.includes("No children to claim")?i="领取失败: 没有可领取的子矿机":i=`领取失败: ${t.message}`),j.show({content:i,position:"center"})}finally{ce(!1)}},[w,I,u]);s.useEffect(()=>{if(u.length===0)return;const t=u.filter(i=>i.mtype===1&&i.isActivatedStakedLP).map(i=>i.id);t.join(",")!==M.join(",")&&(console.log("基于所有矿机同步母矿机ID列表:",t),O(t),B([]))},[u,M]),s.useEffect(()=>{a&&(console.log("页面显示，开始查询矿机数据"),w()),a||(console.log("页面临时隐藏，清空选中列表"),S([]),N(""),B([]))},[w,a]);const W=()=>{const t=parseInt(v,10);if(isNaN(t)||t<0){j.show({content:"请输入有效的数量",position:"center"});return}const i=c.filter(g=>!g.isActivatedStakedLP),m=Math.min(t,i.length);console.log(`根据数量选择矿机: ${m} 台`),h(g=>g.map((d,$)=>d.isActivatedStakedLP?d:{...d,checked:$<m})),S(i.slice(0,m))};s.useEffect(()=>{if(!de.current)return;const t=()=>{const i=window.innerHeight,m=z>0?170:139,g=i-m;console.log(`计算列表高度: 窗口高度${i} - 顶部高度${m} = ${g}`),ie(g)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[z]);const T=s.useCallback(t=>{console.log(`点击选择矿机，ID: ${t.id}，当前状态: ${t.checked}`),h(i=>{const m=i.map(d=>d.isActivatedStakedLP?d:d.id===t.id?{...d,checked:!d.checked}:d);if(!t.checked)S([...r,t]);else{const d=r.filter($=>$.id!==t.id);S(d)}return m})},[r]),l=t=>{console.log(`点击查看矿机详情，ID: ${t.id}`),V("/user/machineDetail",{state:t})},L=s.memo(({index:t,style:i,data:m})=>{const g=m[t];return e.jsx("div",{style:{...i,height:"70px"},children:e.jsx($t,{item:g,onLeftClick:T,onRightClick:l})})}),[C,G]=s.useState(!1),{data:F,isLoading:le,error:ke}=De({address:te,abi:Ee,functionName:"getIDXAmount",args:[30]}),{data:Le,isLoading:ve,error:Ke}=De({address:$e,abi:Fe,functionName:"balanceOf",args:[p]});s.useEffect(()=>{if(!ve){const t=ge(Le);console.log(`更新IDX钱包余额: ${t}`),k(t)}},[ve,Le]),s.useEffect(()=>{if(!le){const t=ge(F);console.log(`更新单台矿机激活费用: ${t} IDX`),ne(t)}},[le,F]);const Re=async()=>{if(r.length===0){j.show({content:"请选择要激活的矿机",position:"center",duration:2e3});return}console.log(`准备激活选中的矿机，共${r.length}台，ID列表:`,r.map(t=>t.id)),Ve(!0)},{isLoading:Se,isAllowanceSufficient:o}=xt(Be(String(Math.ceil(+_*r.length)))),Z=async()=>{try{if(Se)return;if(A(1),be(!0),G(!0),console.log("开始执行支付流程，检查授权状态:",o?"已授权":"未授权"),!o){console.log("开始执行授权操作，授权地址:",te);const g=await R({address:$e,abi:Fe,functionName:"approve",args:[te,Be(rt)]});console.log("授权交易已发送，哈希:",g),console.log("等待授权交易确认...");const d=await Ne(f,{hash:g,chainId:Ie});console.log("授权交易已确认，区块号:",d.blockNumber)}const t=r.map(g=>g.id);console.log("准备激活的矿机ID列表:",t),console.log("开始执行批量激活合约调用...");const i=await Te(f,{address:te,abi:Ee,functionName:"batchActivateMachinesWithLP",args:[t]});console.log("批量激活交易已发送，哈希:",i),console.log("等待批量激活交易确认...");const m=await Ne(f,{hash:i,chainId:Ie});console.log("批量激活交易已确认，区块号:",m.blockNumber),j.show({content:"激活成功",position:"center"}),console.log("激活成功，刷新矿机列表"),w(),S([]),N(""),Ve(!1)}catch(t){j.show({content:`激活失败: ${t instanceof Error?t.message:"未知错误"}`,position:"center",duration:3e3}),console.error("激活失败详情:",t)}finally{G(!1)}},Je=()=>{console.log("关闭弹窗"),ae.clear()},ut=()=>{console.log("前往查看挂售矿机"),V("/user"),ae.clear()},mt=()=>{if(r.length===0){j.show({content:"请选择要转让的矿机",position:"center"});return}console.log(`准备转让选中的矿机，共${r.length}台`),V("/user/transferMachine",{state:r})},ft=async()=>{if(r.length===0){j.show({content:"请选择要挂售的矿机",position:"center"});return}try{if(console.log("检查当前地址是否有权限挂售..."),!await ee(f,{address:Q,abi:q,functionName:"selluser",args:[p]})){console.log("当前地址无挂售权限"),ae.show({bodyStyle:{background:"#000000",color:"#ffffff",width:"75vw",padding:"15px",borderRadius:"20px"},showCloseButton:!0,closeOnMaskClick:!0,content:e.jsxs("div",{className:"pt-[15px] text-white text-[15px] flex flex-col items-center gap-4",children:[e.jsx("div",{className:"text-[#B195FF]",children:"提示:"}),e.jsx("div",{children:"180天内未盈利即可挂售矿机"}),e.jsx("button",{className:"w-full bg-[#895EFF] rounded-3xl text-white py-2 mt-4",onClick:Je,children:"确认"})]})});return}}catch(t){console.error("检查挂售权限失败:",t),j.show({content:"请稍后再试",position:"center"});return}console.log("准备挂售的矿机列表:",r.map(t=>t.id));try{let t=0;const i=r.map((d,$)=>({address:te,abi:Ee,functionName:"listChildMachine",args:[d.id],onConfirmed:(Me,we)=>{t++,console.log(`第${we+1}/${r.length}个挂售调用已确认，区块号: ${Me.blockNumber}`)}}));console.log(`开始执行挂售批量调用，共${i.length}个矿机`);const m=await J(i);console.log("挂售批量调用全部执行完成，结果:",m),m.find(d=>d.success)&&(w(),ae.show({bodyStyle:{background:"#000000",color:"#ffffff",width:"75vw",padding:"15px",borderRadius:"20px"},showCloseButton:!0,closeOnMaskClick:!0,content:e.jsxs("div",{className:"pt-[15px] text-white text-[15px] flex flex-col gap-4",children:[e.jsx("div",{className:"text-[#B195FF]",children:"提示"}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:["您已向交易市场上架了“",t,"台矿机” ，请耐心等待买家购买。"]}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{className:"w-full bg-black rounded-3xl text-white py-2 border border-[#666]",onClick:Je,children:"知道了"}),e.jsx("button",{className:"w-full bg-[#895EFF] rounded-3xl text-white py-2",onClick:ut,children:"去看看"})]})]})]})}))}catch(t){j.show({content:"挂售失败，请稍后再试",position:"center"}),console.error("挂售流程错误:",t)}},{setOpen:Ve,component:gt}=lt({title:"",contentClassName:"",closeButtonClassName:"",content:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-[#6433EC] font-bold text-[15px] pt-2 pb-4",children:"激活矿机需支付打底池费用!"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"font-bold text-[14px]",children:"待支付IDX"}),e.jsx("div",{className:"text-[#FF5050] font-bold text-[16px]",children:e.jsx(oe,{type:re.BALANCE,value:+_*r.length,decimalSubLen:2,className:"ml-2 mr-1.5"})})]}),e.jsxs("div",{className:"flex justify-end text-[12px]",children:[e.jsx("div",{className:"text-[#686D6D]",children:"钱包余额："}),e.jsx("div",{className:"font-bold",children:e.jsx(oe,{type:re.BALANCE,value:K,decimalSubLen:2,className:"ml-2 mr-1.5"})})]})]}),e.jsx(Ze,{}),e.jsx(fe,{onClick:Z,className:"!bg-black !rounded-3xl !text-white flex justify-center !py-4 !px-6 w-full !text-[16px] !h-auto",loading:C,disabled:+K<+_*r.length,children:+K>+_*r.length?"支付费用":"余额不足"})]})});return e.jsxs("div",{className:"pt-2 flex flex-col justify-between h-full",children:[gt,e.jsx(jt,{visible:he,onMaskClick:()=>be(!1),children:e.jsxs("div",{className:"bg-[#1d1c25] rounded-xl text-white",children:["你有",e.jsx("span",{className:"text-[#895eff] text-[1rem] font-bold",children:n}),"笔交易待处理"]})}),e.jsxs("div",{className:"px-[21px]",children:[z>0&&M.length>0&&e.jsxs("div",{className:"w-full bg-black border border-gray-600 rounded-3xl px-4 py-5",children:[e.jsxs("div",{className:"flex items-center justify-between text-[15px] text-white mb-3",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-red text-[16px] font-bold",children:z}),"个子矿机待领取"]}),e.jsx("button",{className:`text-xs px-3 py-1 transition-colors rounded-full
    ${I.length===M.length?"bg-[#895EFF] text-white":"bg-white text-black"}`,style:{borderRadius:"9999px",transition:"transform 300ms cubic-bezier(.17,.67,.48,1.64)"},onClick:t=>{B(I.length===M.length?[]:[...M]);const i=t.currentTarget;i.style.transform="scale(1.25)",setTimeout(()=>{i.style.transform="scale(1)"},300)},children:I.length===M.length?"取消全选":"全选"})]}),e.jsx("div",{className:"scroll-hide",style:{maxHeight:"120px",overflowY:"auto",display:"flex",flexWrap:"wrap",gap:"6px",padding:"8px 8px 4px",borderRadius:"12px",backgroundColor:"#2a2a2a",WebkitOverflowScrolling:"touch"},children:M.map(t=>e.jsxs("div",{className:`shrink-0 cursor-pointer select-none text-xs
            flex items-center justify-center
            ${I.includes(t)?"bg-[#895EFF] text-white":"bg-white text-black"}`,style:{height:"28px",minWidth:"90px",borderRadius:"14px",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",transition:"transform 300ms cubic-bezier(.17,.67,.48,1.64)"},onClick:i=>{X(t);const m=i.currentTarget;m.style.transform="scale(1.25)",setTimeout(()=>m.style.transform="scale(1)",300)},children:["母矿机ID:",t]},t))}),e.jsx("div",{className:"flex justify-end",children:e.jsx(fe,{className:"!bg-white !text-black !rounded-3xl flex justify-center px-6 h-10 min-h-[40px] !py-0",style:{transition:"transform 300ms cubic-bezier(.17,.67,.48,1.64)"},onClick:t=>{Y();const i=t.currentTarget;i.style.transform="scale(1.08)",setTimeout(()=>{i.style.transform="scale(1)"},300)},disabled:pe||I.length===0,children:e.jsx("div",{className:"text-[14px] font-medium flex items-center h-full",children:"确定领取"})})}),e.jsx("style",{children:`
      .scroll-hide::-webkit-scrollbar {
        display: none;
      }
      .scroll-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    `})]}),z>0&&M.length>0&&e.jsx("div",{style:{height:"16px"}}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"activation-input-wrapper",children:e.jsx(Nt,{type:"number",value:v,onChange:t=>N(t),placeholder:"选择数量",className:"activation-input",style:{width:"60px",marginRight:"10px",fontSize:"10px",border:"1px solid #ffffff",backgroundColor:"#ffffff",color:"#000000",borderRadius:"8px",padding:"3px 6px",boxSizing:"border-box",height:"28px"},min:0,max:D})}),e.jsx("style",{children:`
      .activation-input-wrapper input {
        font-size: 10px !important;
        color: #000000 !important;
      }
      .activation-input-wrapper input::placeholder {
        font-size: 11px !important; /* 占位文字大小 */
        color: #000000 !important;  /* 占位文字黑色 */
        white-space: nowrap !important;
        opacity: 1 !important;
      }
    `}),e.jsx(fe,{onClick:W,className:"!bg-[#895EFF] !text-white !rounded-3xl !py-1 !px-4 !text-sm !border-none",style:{backgroundColor:"#010101ff",border:"none",minWidth:"50px",height:"28px",fontSize:"10px"},children:"确认"})]}),e.jsxs("div",{className:"flex text-[#505050] text-[.875rem]",children:["待激活矿机，共计:",e.jsx("div",{className:"text-black font-bold mx-1",children:D}),"台"]})]}),e.jsx("div",{ref:de,style:{height:`${E}px`},className:"no-scrollbar",children:xe?e.jsx(Qe.Paragraph,{animated:!0,className:"customSkeleton"}):c.length>0?e.jsx(Ue,{height:E,width:"100%",itemCount:c.length,itemSize:80,itemData:c,children:L}):e.jsx(qe,{})})]}),e.jsxs("div",{className:"w-full bg-white h-[64px] flex justify-around items-center px-[30px] text-[12px]",children:[e.jsxs("div",{className:" flex flex-col justify-center items-center",onClick:Re,children:[e.jsx("img",{src:ht,alt:"",width:15}),e.jsx("div",{children:"激活矿机"})]}),e.jsxs("div",{className:"flex flex-col justify-center items-center ",onClick:mt,children:[e.jsx("img",{src:Lt,alt:"",width:18}),e.jsx("div",{children:"转让"})]}),e.jsxs("div",{className:"flex flex-col justify-center items-center ",onClick:ft,children:[e.jsx("img",{src:At,alt:"",width:20}),e.jsx("div",{children:"挂售"})]})]})]})},Ht=({item:a,onLeftClick:p})=>e.jsxs("div",{className:Oe("p-2 bg-white flex justify-between mt-2 text-[.68rem] rounded-[24px]"),children:[e.jsxs("div",{className:"flex relative",onClick:()=>p(a),children:[e.jsx(ye,{checked:a.checked,icon:c=>c?e.jsx("img",{src:Ce,alt:"",width:16,height:16}):e.jsx("div",{className:"border border-[#a5a4a4] w-[1rem] h-[1rem] rounded-[50%]"})}),e.jsx("div",{className:"bg-black w-[58px] h-[58px] mx-2 rounded-2xl"})]}),e.jsxs("div",{className:"basis-5/7  flex flex-col justify-center gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"flex justify-center rounded-3xl  w-[80px]",children:e.jsx("div",{className:"w-full pr-2",children:"矿机"})}),e.jsx("div",{className:"text-[#15b268] flex gap-1",children:e.jsx("img",{src:kt,alt:"",width:65})})]}),e.jsx("div",{className:"flex",children:"生命剩余： 0 天"})]})]},a.id);const _t=()=>{const[a,p]=s.useState([]),[c,h]=s.useState(!1),[u,b]=s.useState(0),{address:v}=Xe(),[N,E]=s.useState(0),[ie,de]=s.useState(0),[xe,y]=s.useState(!1),[r,S]=s.useState(!1),[_,ne]=s.useState(0),K=s.useRef(null),[k,R]=s.useState([]);s.useEffect(()=>{c&&R(a)},[c,a]),s.useEffect(()=>{a.length===k.length&&k.length>0&&h(!0)},[a,k]);const J=()=>{ae.clear()},z=async()=>{try{S(!0);const n=await Te(f,{address:ue,abi:me,functionName:"claimMixReward",args:[]});await Ne(f,{hash:n,chainId:Ie}),ae.show({bodyStyle:{background:"#000000",color:"#ffffff",width:"75vw",padding:"15px",borderRadius:"20px"},showCloseButton:!0,closeOnMaskClick:!0,content:e.jsxs("div",{className:"pt-[15px] text-white text-[15px] flex flex-col gap-4",children:[e.jsx("div",{className:"text-[#B195FF]",children:"提示"}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:["你已成功提取MIX收益：",e.jsx(oe,{type:re.BALANCE,value:u,decimalSubLen:2,className:"font-bold text-[15px]"}),"，已存入你的钱包中。"]}),e.jsx("button",{className:"w-full bg-[#895EFF] rounded-3xl text-white py-2",onClick:J,children:"确认"})]})]})}),H()}catch(n){j.show({content:"提取失败，请稍后再试",position:"center"}),console.error(n)}finally{S(!1)}},H=s.useCallback(async()=>{try{y(!0);const A=(await ee(f,{address:Q,abi:q,functionName:"getOwnerToMachineIds",args:[v]})).map(T=>Number(T)),D=A.map(T=>({address:Q,abi:q,functionName:"getMachineLifecycle",args:[T]})),w=(await se(f,{contracts:D})).map((T,l)=>({destroyed:T.result.destroyed,mtype:T.result.mtype,checked:!1,id:A[l]})),Y=await ee(f,{address:ue,abi:me,functionName:"destroyedMachineCount",args:[v]});let W=w.filter(T=>T.destroyed);W=W.slice(0,Number(Y)),p(W),console.log("filter nodesAmount * list",W,Number(Y))}catch(n){console.log(n)}finally{y(!1)}},[v]);s.useEffect(()=>{H()},[H]);const M=async()=>{try{const n=await ee(f,{address:ue,abi:me,functionName:"nodesAmount",args:[]});de(Number(n))}catch(n){console.error(n)}};s.useEffect(()=>{M()},[]);const O=async()=>{try{const n=await ee(f,{address:ue,abi:me,functionName:"getUserNodeCount",args:[v]});E(Number(n))}catch(n){console.error(n)}};s.useEffect(()=>{O(),pe()},[]);const pe=async()=>{try{const n=await ee(f,{address:ue,abi:me,functionName:"getUserCurrentAvailableMix",args:[v]});b(+ge(n))}catch(n){console.error(n)}};s.useEffect(()=>{if(!K.current)return;const n=()=>{const X=window.innerHeight-100;ne(X)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);const ce=s.useCallback(n=>{p(A=>{const D=A.map(w=>w.id===n.id?{...w,checked:!w.checked}:w);if(!n.checked)R(c?a:[...k,n]);else{const w=k.filter(Y=>Y.id!==n.id);R(w),h(!1)}return D})},[c,a,k]),I=n=>n?e.jsx("img",{src:Ce,alt:"",width:16,height:16}):e.jsx("div",{className:"border border-[#a5a4a4] w-[1rem] h-[1rem] rounded-[50%]"}),B=()=>{p(n=>{const A=n.map(D=>({...D,checked:!c}));return R(c?[]:A),A}),h(!c)},V=s.memo(({index:n,style:A,data:D})=>{const X=D[n];return e.jsx("div",{style:{...A,height:"70px"},children:e.jsx(Ht,{item:X,onLeftClick:ce})})}),he=async()=>{if(k.length<ie){j.show({content:`所选残骸数量不足${ie}个，无法执行操作`,position:"bottom",duration:2e3});return}try{S(!0);const n=await Te(f,{address:ue,abi:me,functionName:"createNode",args:[]});await Ne(f,{hash:n}),ae.show({bodyStyle:{background:"#000000",color:"#ffffff",width:"75vw",padding:"15px",borderRadius:"20px"},showCloseButton:!0,closeOnMaskClick:!0,content:e.jsxs("div",{className:"pt-[15px] text-white text-[15px] flex flex-col gap-4",children:[e.jsx("div",{className:"text-[#B195FF]",children:"提示"}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:"恭喜你“合成小节点”执行成功，您将获得该节点5%平均分红权，以后每天享受分红！"}),e.jsx("button",{className:"w-full bg-[#895EFF] rounded-3xl text-white py-2",onClick:J,children:"确认"})]})]})})}catch(n){console.error(n),j.show({content:"合成失败，请稍后再试",position:"center"})}finally{S(!1)}},be=()=>{ae.show({bodyStyle:{color:"#ffffff",width:"80vw",padding:"10px",borderRadius:"20px",height:"220px"},content:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold text-[15px] mt-1",children:"节点权益说明"}),e.jsx(Ze,{}),e.jsx("div",{className:"font-bold text-[15px] mb-4",children:"合成NFT小节点"}),e.jsxs("div",{className:"flex mb-4 gap-1 w-full",children:[e.jsx("div",{className:"bg-[#8665E0] rounded-[5px] px-1 text-white w-[40px] h-[20px] text-[12px] text-center",children:"条件"}),e.jsxs("div",{className:"text-[12px]",children:["需",e.jsx("span",{className:"text-[#8665E0] font-bold text-[14px]",children:"100"}),"台矿机残骸合成1个小节点"]})]}),e.jsxs("div",{className:"flex gap-1 w-full",children:[e.jsx("div",{className:"bg-[#8665E0] rounded-[5px] px-1 text-white w-[40px] h-[20px] text-[12px] text-center",children:"权益"}),e.jsxs("div",{className:"text-[12px] flex-1",children:["享受全网燃料费总和",e.jsx("span",{className:"text-[#8665E0] font-bold text-[14px]",children:"x5%"}),"的平均分红权。每天分红，每天领取，即刻到账。"]})]})]}),closeOnMaskClick:!0,showCloseButton:!0})};return new Array(10).fill({checked:!1,id:111,mtype:1}),e.jsxs("div",{className:"pt-4  flex flex-col justify-between h-full",children:[e.jsxs("div",{className:"px-[21px] ",children:[e.jsxs("div",{style:{background:`#000 url(${It}) no-repeat center`,width:"100%",padding:"21px",gap:"5px",borderRadius:"25px"},children:[e.jsxs("div",{className:"text-white flex justify-between",children:["昨日节点分红",e.jsxs("div",{className:"bg-[#59368C] text-[10px] rounded-2xl text-white flex justify-center items-center px-2 gap-1",children:["小节点 x ",e.jsx("div",{children:N})]})]}),e.jsxs("div",{className:"flex   text-white items-center pt-4 justify-center",children:[e.jsx(oe,{type:re.BALANCE,value:u,decimalSubLen:2,className:"ml-2 mr-1.5  font-bold text-[22px]"}),e.jsx("div",{className:"text-[11px] pt-[8px] ",children:"MIX"})]}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(fe,{disabled:u===0,loading:r,onClick:z,className:"w-[70%]  !bg-[#7334FE] !rounded-2xl !h-[36px] !mb-2  !items-center  !p-0 !text-white !border-none !text-[14px]",children:"提取分红"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"text-[#625A77] text-[11px] w-[80%] text-center",children:"分红每日00:00:00结算，请在次日24小时内领取，次日未领取，前日分红自动清零。"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx(ye,{className:"mr-6 h-[32px] ",checked:c,icon:n=>I(n),onClick:B,style:{"--font-size":"14px","--gap":"6px"},children:"全选"}),e.jsxs("div",{className:"flex text-[#505050] gap-2 text-[14px]",onClick:be,children:["节点权益说明",e.jsx("img",{src:Et,alt:""})]})]}),e.jsx("div",{ref:K,style:{height:`${_}px`},className:"no-scrollbar  rounded-2xl  mb-[4.5rem]",children:xe?e.jsx(Qe.Paragraph,{animated:!0,className:"customSkeleton"}):a.length>0?e.jsx(Ue,{height:_,width:"100%",itemCount:a.length,itemSize:80,itemData:a,children:V}):e.jsx(qe,{})})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 w-full bg-white py-[.4rem] flex items-center px-[21px]",children:[k.length>0&&e.jsx("div",{className:"bg-[#F1F1F3] rounded-[50%] w-[32px] h-[32px] flex justify-center items-center text-[#895FFE] font-bold",children:k.length}),e.jsx(fe,{disabled:a.length===0,onClick:he,className:"!mx-auto !border-none",children:e.jsxs("div",{className:"!flex !flex-col !items-center !justify-center",children:[e.jsx("img",{src:Pt,alt:"",width:18}),e.jsx("div",{className:"text-[13px] mt-1",children:"合成小节点"})]})})]})]})},cs=()=>{const a=We(),p=()=>{a("/user")},c=s.useRef(null),[h,u]=s.useState("0"),b=0,v=[{title:"母矿机",children:e.jsx(Tt,{})},{title:"矿机",children:e.jsx(Rt,{isShow:h==="1"})},{title:"节点",children:e.jsx(_t,{})}];return e.jsx("div",{className:"h-full overflow-hidden text-[16px] relative",children:e.jsxs("div",{className:"flex pt-4 w-full h-full justify-between",children:[e.jsx("div",{className:"h-[50px] flex items-center absolute top-[10px] left-[20px] ",onClick:p,children:e.jsx("img",{src:yt,alt:""})}),e.jsxs("div",{className:"w-full h-full flex flex-col justify-between",children:[e.jsx(st,{activeKey:h,onChange:N=>{var E;u(`${N}`),(E=c==null?void 0:c.current)==null||E.swipeTo(Number(N))},className:Oe([Dt["adm-tabs"]],`w-[70%]  mx-auto flex justify-around
              !shrink-0  [&_.adm-tabs-tab-wrapper]:flex-none [&_.adm-tabs-tab-wrapper]:px-0
              [&_.adm-tabs-tab.adm-tabs-tab-active]:font-medium [&_.adm-tabs-tab.adm-tabs-tab-active]:opacity-100
              [&_.adm-tabs-tab]:pb-[11px] [&_.adm-tabs-tab]:pt-[14px] [&_.adm-tabs-tab]:text-[15px]
              [&_.adm-tabs-tab]:opacity-40 [&_.adm-tabs-tab]:transition-transform
          `),style:{"--title-font-size":"16px"},children:v.map((N,E)=>e.jsx(st.Tab,{title:N.title,className:""},E))}),e.jsx(at,{className:"flex-1 outline-0 ",ref:c,indicator:()=>null,tabIndex:Number(h),defaultIndex:b,onIndexChange:N=>u(`${N}`),children:v.map((N,E)=>e.jsx(at.Item,{className:"no-scrollbar max-w-full overflow-x-hidden overflow-y-auto",children:N.children},E))})]})]})})};export{cs as default};
